%script{ :type=>"text/javascript", :src=>"http://www.google.com/jsapi?#{maps_api_key}" }
:javascript
  google.load("maps", "2.x");
  google.load("jquery", "1.3.2");

:javascript
  $(document).ready(function() {
    var map = new GMap2(document.getElementById('map'));
    var centre = new GLatLng(#{@map_rectangle.latitude_centre},#{@map_rectangle.longitude_centre});
  
    sw = new GLatLng(#{@map_rectangle.south},#{@map_rectangle.west});
    ne = new GLatLng(#{@map_rectangle.north},#{@map_rectangle.east});
    bounds = new GLatLngBounds(sw, ne);
    map.setCenter(centre, 8);
    zoom = Math.min(map.getBoundsZoomLevel(bounds), 9);
    map.setZoom(zoom);
  });

#map